<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Touch and buttons - Tingbot Docs</title>
  

  <link rel="shortcut icon" href="../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../extra.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Touch and buttons";
    var mkdocs_page_input_path = "guides/touch-buttons.md";
    var mkdocs_page_url = "/guides/touch-buttons/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 
  <script src="../../extra.js"></script>

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Tingbot Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../tide/">Tide</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>User Guide</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../setup/">Setting up Tingbot</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../first-app/">Writing your first app</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Touch and buttons</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#buttons">Buttons</a></li>
                
                    <li><a class="toctree-l4" href="#more-buttons">More buttons</a></li>
                
            
                <li class="toctree-l3"><a href="#touch">Touch</a></li>
                
                    <li><a class="toctree-l4" href="#basic-drawing-app">Basic drawing app</a></li>
                
                    <li><a class="toctree-l4" href="#smooth">Smooth!</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../publish-to-ocean/">Publishing to Tingbot Ocean</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Reference</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../links/tingbot-python-docs/">tingbot-python</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/tingapp-format/">The tingapp format</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/tingbot-os/">Tingbot OS</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Links</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../links/ocean/">Tingbot Ocean</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../links/github/">Github</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Tingbot Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>User Guide &raquo;</li>
        
      
    
    <li>Touch and buttons</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/tingbot/tingbot-docs/" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="buttons">Buttons</h1>
<p>Tide includes some handy examples that can be selected from the <strong>File -&gt; Examples</strong> menu. For instance:</p>
<p><img alt="image" src="../images/TingbotBT001.png" /></p>
<p>will load the <strong>Buttons</strong> example code (below) into Tide.</p>
<pre><code># Button presses can be received by using the @button.press
# decorator. There are four buttons on Tingbot:
#
#   @left_button.press
#   @midleft_button.press
#   @midright_button.press
#   @right_button.press

import tingbot
from tingbot import *

state = {'number': 0}

@left_button.press
def press():
    state['number'] -= 1

@right_button.press
def press():
    state['number'] += 1

@every(seconds=1.0/30)
def loop():
    screen.fill(color='black')
    screen.text(state['number'], color='green')

tingbot.run()
</code></pre>
<p>To 'press' the buttons in the simulator just position the mouse cursor over one of the buttons and click. The screen shot below shows the state of play just before the right - incrementing - button is pressed. It's left as an exercise for the reader to work out what will happen when it is pressed ;).
 <img alt="image" src="../images/TingbotBT002.png" /></p>
<h2 id="more-buttons">More buttons</h2>
<p>Now let's move on to a slightly more animated example that shows all four types of button event available in Tide. Now load the <strong>More buttons</strong> example code (below) into Tide.</p>
<pre><code># Each button also has four events - down, up, press and hold.
#
# Try pressing or holding the right button to see when each
# event is triggered.

import tingbot
from tingbot import *

@right_button.down
def down():
    screen.rectangle(color='red', size=(1,50), align='topright')
    screen.text('down', font_size=12, align='topright')

@right_button.press
def next():
    screen.rectangle(color='green', size=(1,50), align='right')
    screen.text('press', font_size=12, align='right')

@right_button.hold
def next():
    screen.rectangle(color='blue', size=(1,50), align='right')
    screen.text('hold', font_size=12, align='right')

@right_button.up
def next():
    screen.rectangle(color='white', size=(1,50), align='bottomright')
    screen.text('up', font_size=12, align='bottomright')

screen.fill(color='black')

@every(seconds=1.0/30)
def loop():
    # This moves everything on the screen left by 1px
    screen.surface.scroll(-1, 0)
    screen.rectangle(color='black', size=(1,240), align='right')

tingbot.run()
</code></pre>
<p>When the above is run the screen contents will continually scroll from right to left. A vertical line - a 1-pixel wide by 240 pixels high rectangle the same colour as the screen background - is 'inserted at the right hand side of the screen to fill the 'gap' made by moving the contents of the screen one pixel to the left. This is a simple way to 'animate' the display. </p>
<p><img alt="image" src="../images/TingbotBT008.png" /></p>
<p>Check the <a href="https://tingbot-python.readthedocs.io/en/latest/buttons.html">tingbot-python buttons</a> documentation for more info on what can be done with buttons.</p>
<h1 id="touch">Touch</h1>
<p>The Tingbot display is touch sensitive as it uses a resistive screen consisting of a number of layers. When the screen is pressed, the outer later is pushed onto the next layer â€” the technology senses that pressure is being applied and registers input. In effect it is sensitive to pressure from, for example, a finger or stylus.</p>
<h2 id="basic-drawing-app">Basic drawing app</h2>
<p>It couldn't be simpler to use this in-built touch feature of Tingbot to create a basic drawing app in Tide.</p>
<pre><code>import tingbot
from tingbot import *

screen.fill(color='white')

@touch()
def on_touch(xy):
    screen.rectangle(
        xy=xy,
        size=(5, 5),
        color='blue')

tingbot.run()
</code></pre>
<p><img alt="image" src="../images/TingbotBT010.png" /></p>
<blockquote>
<p><strong>Aside:</strong>
It would be convenient to have the ability to clear the screen between doodles. Using our new-found knowledge of button events this could be done by simply adding, for example:</p>
<pre><code>@left_button.hold
def clear():
    screen.fill(color='white')
</code></pre>
<p>to give our new and improved version:</p>
<pre><code>import tingbot
from tingbot import *

screen.fill(color='white')

@left_button.hold
def clear():
    screen.fill(color='white')

@touch()
def on_touch(xy):
    screen.rectangle(
        xy=xy,
        size=(5, 5),
        color='blue')

tingbot.run()
</code></pre>
<p>Try it and see!</p>
</blockquote>
<h2 id="smooth">Smooth!</h2>
<p>One of the challenges of using a touch-enabled display under the direct control of a Raspberry Pi is the sampling rate of the position at the point of touch. So the doodled <strong>Hello World!</strong> in the screen shot above had to be drawn steadily and relatively slowly to make sure that the letters were solid. Doodling quickly may leave gaps since the touch position could have moved to coordinates beyond the ability of the rectangle - i.e one with <code>size=(5,5)</code> [see above] pixels - to cover the gap.</p>
<p>One approach to mitigating this issue is to draw a line between the previous point of touch and the current point of touch rather than just plonk down coloured pixels at the current touch coordinate. This technique is demonstrated in the following enhancement to the simple drawing app:</p>
<pre><code>import tingbot
from tingbot import *

state = {
    'previous_xy': None
}

screen.fill(color='white')

@left_button.hold
def clear():
    screen.fill(color='white')

@touch()
def on_touch(xy, action):
    if state['previous_xy']:
        screen.line(
            state['previous_xy'],
            xy,
            width=5,
            color='blue')

    if action == 'up':
        state['previous_xy'] = None
    else:
        state['previous_xy'] = xy

tingbot.run()
</code></pre>
<p>The difference is quite striking when compared side-by-side as you can see in the screen grab below with the original version on the left and the smoothing version on the right. Both crosses were drawn at the same speed.</p>
<p><img alt="image" src="../images/TingbotBT012.png" /></p>
<blockquote>
<p><strong>Aside:</strong>
The technique shown above is, strictly speaking, interpolation rather than smoothing but we couldn't resist (no pun intended) the chance to use <strong>Smooth!</strong> as a heading ;)</p>
</blockquote>
<p>Check the <a href="https://tingbot-python.readthedocs.io/en/latest/touch.html">tingbot-python touch</a> documentation to see how to react to touch events only within a certain area.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../publish-to-ocean/" class="btn btn-neutral float-right" title="Publishing to Tingbot Ocean">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../first-app/" class="btn btn-neutral" title="Writing your first app"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/tingbot/tingbot-docs/" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../first-app/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../publish-to-ocean/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
